<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Authentication Successful</title>
  <script>
    window.onload = () => {
      const message = { type: 'authSuccess' };

      if (window.opener && !window.opener.closed) {
        console.log('✅ Posting authSuccess to opener...');
        window.opener.postMessage(message, '*');
        document.getElementById('message').textContent = 'Authentication complete. This window will close automatically.';
        setTimeout(() => window.close(), 500);
      } else {
        console.warn('⚠️ Unable to reach the original tab.');
        document.getElementById('message').textContent = 'Authentication complete. Please close this window and return to the previous tab.';
      }
    };
  </script>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">
  <h2 id="message">Completing authentication…</h2>
</body>
</html>